<!-- Chapter 8: Using Libraries -->
<h1>Chapter 8</h1>
<hr />
<h1 class="sub">Using Libraries</h1>

<div class="blackbox">
<div class="blackbox-title">
<strong>Learning Objectives</strong>
</div>
<div class="blackbox-contents">
<ul>
    <li>Understand what a library is.</li>
    <li>Learn how to import libraries into a Python program.</li>
    <li>Learn some of the functions of the math and random libraries.</li>
    <li>Understand how to find libraries that are available for Python,
        and learn how to use them.</li>
    <li>Learn how to install 3rd-party Python libraries in Thonny.</li>
</ul>
</div>
</div>



<h2>8.1 Overview</h2>
<hr />

<p>Python comes with some built-in functions that we've used in our programs.
These include things like <code>print</code>, <code>input</code>,
<code>round</code>, and <code>len</code>.  We can use any of these directly in
a Python program without needing to do anything special.</p>

<p>Python also comes with lots of <strong>libraries</strong>, that we can use
in our programs.  A library is essentially a collection of functions that we
can use in our own programs to help us.  Python has ready-made libraries for
doing all sorts of things like solving math problems, getting random numbers,
handling dates and times, and even working with websites, databases, and
graphical interfaces.  Python does not let you call on all of these
automatically, but the libraries included with Python are easy to access, and
we will see how to do that in this chapter.</p>

<p>There are also lots of other libraries that Python does not come with, but
which can be downloaded from the Internet.  These allow programmers to use code
that was created by other programmers all across the world.  Sharing work with
other people and building off of what others have done is a big part of
computer science.  This makes it possible to make cooler things than if
everyone had to work alone.</p>

<p>Lastly in this chapter, we'll talk about how to look up documentation on
libraries so you can learn how to use them.</p>


<h2>8.2 The import Statement</h2>
<hr />

<p>In order to use a library, we must put an <code>import</code> statement in
our program.  This tells Python to load the library so that we access the functions
inside of it.  For example, we will start by looking at the math library.  In
order to use this library, we could do the following:</p>

<pre>
<code class="python">
import math
</code>
</pre>

<p>After doing the import, we will be able to call upon any of the functions
inside the math library.  One thing that the math library comes with is the
<code>sqrt</code> function.  This finds the square root of a number.  For
example, the following programs asks the user to enter a number and then
prints the square root of it:</p>

<pre>
<code class="python">
import math

num = float(input("Enter a number: "))
root = math.sqrt(num)
print("The square root of", num, "is", root)
</code>
</pre>

<p>Here we start with the <code>import</code> statement, and then later use
<code>sqrt</code>.  The import of math has to be before we actually use
anything from the math library.  Usually people put import lines all at
the top of a program, so we make sure things are imported before we use them.</p>

<p>Also note that we don't just call <code>sqrt</code> directly, we have to put
the name of the library first, followed by a <code>.</code>, followed by the
name of the function we're using.  The reason for this is to help keep things
organized.  The math library has over 50 things in it, and if we are using lots
of libraries in one program, it could be hard to know what things are coming
from where.  When we see <code>math.sqrt</code>, we know that the sqrt function
comes from the math library which we imported above.</p>



<h2>8.3 Another form of import</h2>
<hr />

<p>Sometimes we want to use some functions from a library and we don't want to
have to put the name of the library and the <code>.</code> before the name of
the functions every single time.  For example, imagine we are writing a program
that had to do lots and lots of square roots.  It might get kind of tedious to
write <code>math.sqrt</code> every time instead of just <code>sqrt</code>.</p>

<p>Python allows us to do that by using a different form of the import command,
which looks like this:</p>

<pre><code class="python">
from math import sqrt
</code></pre>

<p>This tells Python that we want to use the <code>sqrt</code> function from the math
library, and that we want to do it without having to write <code>math.</code> before
it every time.  Now our program to calculate square roots might look like
this:</p>

<pre>
<code class="python">
from math import sqrt

num = float(input("Enter a number: "))
root = sqrt(num)
print("The square root of", num, "is", root)
</code>
</pre>

<p>Notice that we now <em>can</em> just say <code>sqrt</code> instead of having
to put <code>math.sqrt</code>.  However, now we can't use anything from the
math library <em>except</em> for sqrt.  If we wanted to be able to call upon
multiple things from the math library (like the <code>sin</code> function for
calculating the sine of an angle), we could add it to the from statement like
this:</p>

<pre>
<code class="python">
from math import sqrt, sin
</code>
</pre>

<p>Now we could call upon the <code>sqrt</code> or the <code>sin</code>
functions, both without using <code>math.</code>.  But we couldn't call upon any of
the other things in the math library.</p>


<p>If we really want to be able to use <em>everything</em>, from math, and we don't
want to type <code>math.</code> for any of it, we can do so like this:</p>

<pre>
<code class="python">
from math import *
</code>
</pre>

<p>The <code>*</code> means everything.  So now we can call upon the
<code>sqrt</code> and <code>sin</code> functions, along with everything else in
math, without needing the <code>math.</code> beforehand.</p>

<p>Generally it's a good idea to stick with the first version of import most of
the time.  That makes your code clearer since everyone can tell what library
everything we use is part of.  There are cases, however, when one program uses
lots and lots of things from one library
where using the other form is more convenient.</p>


<h2>8.4 Documentation Pages</h2>
<hr />

<p>So the math library has lots of things we might want to use in it.  But how
do we find out all what's in there?  And how do we learn how to use those
things?  The answer is that we read the documentation.  The Python website has
pages of documentation for every one of the libraries that it comes with.  The
page for the <a href="https://docs.python.org/3/library/math.html"> math
library is available here</a>.</p>

<p>Just like reading the manual for an electronic device that you purchase,
reading programming documentation can be a bit overwhelming.  The math page
includes <em>all</em> of the information you would need to use the math
library.  Usually you have a specific question, and will need to hunt
through the documentation page looking for the answer.</p>

<p>Luckily, the pages are broken down into categories, and each function
is labelled.  For example, the description listed for <code>sqrt</code>
looks like this:</p>

<p>
math.<strong>sqrt</strong>(<em>x</em>)<br />
<div style="margin-left:40px">Return the square root of <em>x</em>.</div>
</p>

<p>To read this, we would see that the name of the function is <code>sqrt</code>.
We would see that it's part of the math library, so we need to put <code>math.</code> before
using it (unless we use the from style of import).  We also see that there
is one thing inside of the parenthesis.  Then the description of the function
says that it returns to us the square root of that thing (which it calls <code>x</code>).</p>

<p>Another important question is "How does one know what libraries Python even comes with?"
The answer to that question is that Python also includes a list of all the libraries
that it comes with.  <a href="https://docs.python.org/3/library/">You can
find that page here</a>.  It starts listing the "built-in" things such as <code>print</code>,
<code>len</code>, etc.  The it lists all of the things you can import into Python,
grouped in categories.</p>





<h2>8.5 Example: Password Entropy</h2>
<hr />

<p>As an example of using the math library, let's look at the problem
of figuring out how difficult a password would be to guess based on how
long the password is, and how many characters might be in it.
This is related to the problem we looked at last week of checking that
a password met the length and character requirements.  But now we are seeing
how good those requirements themselves are.</p>

<p>Cryptographers use a concept called password <span>entropy</span>, which is
a numerical measure of how difficult a password would be to guess.  This is
based on how many available characters might be in the password, and the length
of the password.  The more possible characters might be in the password, the
harder it is to guess, and the longer the password is, the harder it is to
guess.  It is calculated as:</p>

<p>E = log<sub>2</sub>(C<sup>L</sup>)</p>

<p>Where:<br />
C = the number of possible unique characters available<br />
L = the length of the password<br />
E = the password entropy</p>

<p>In order to write this program, we need to somehow calculate a logarithm
with a base of 2.  Python's math library actually has a function that
does exactly this.  <a href="https://docs.python.org/3/library/math.html#math.log2">
You can read about it here</a>.  We can use this function to
write a program to calculate the password entropy:</p>

<pre>
<code class="python">
import math

# read the input
chars = int(input("How many characters are available? "))
length = int(input("How long is the password required to be? "))

# perform the calculation
entropy = math.log2(chars ** length)

print("The entropy of this is", entropy)
</code>
</pre>

<p>Here we only had one thing in the math library we wanted, so we stuck with
the normal <code>import math</code> line to pull in the math library.  Then
when we needed to do the logarithm, we call the function we need with <code>math.</code>
before it.</p>

<p>Let's try the program out.  First we will figure out the password entropy
of a 4-digit pin number:</p>

<pre class="output">
How many characters are available? <span class="input">10</span>
How long is the password required to be? <span class="input">4</span>
The entropy of this is 13.287712379549449
</pre>

<p>The higher the number, the harder the password would be to guess.
Let's try the scheme of needing 8 characters for a password,
and pulling from lower-case letters, upper-case letters, and digits:</p>


<pre class="output">
How many characters are available? <span class="input">62</span>
How long is the password required to be? <span class="input">8</span>
The entropy of this is 47.633570483095
</pre>

<p>The 62 comes from the 26 lower-case letters, plus the 26 upper-case,
plus the 10 digits.  This password scheme is stronger because it has a much
higher entropy value!</p>




<h2>8.6 The random Library</h2>
<hr />

<p>Another very useful library that is included with Python is the
<code>random</code> library, for getting random numbers.  You can read all
about it <a href="https://docs.python.org/3/library/random.html">on its
documentation page here</a>.</p>

<p>Probably the most useful thing in it for us now is <code>randint</code>
which we can use to get random integers between two values.  For example, the
following program gets the starting point and ending point from the user, and
then prints a random number between those two (including both ends):</p>

<pre>
<code class="python">
import random

a = int(input("Starting point: "))
b = int(input("Ending point: "))

num = random.randint(a, b)
print("Your random number is", num)
</code>
</pre>

<p>Random numbers are used for all sorts of things in programs.  They are used
for games that give you random interactions (for example, some games give you
random "loot" when you defeat enemies).  Also some algorithms use random
numbers as an important part of how they work.</p>

<p>In actual fact, computers cannot really give us truly random numbers.  The
values that <code>randint</code> provides actually are produced from
mathematical sequences.  They <em>seem</em> random, but are in fact not.  These
numbers are called "pseudo-random" for that reason<a class="anchor" id="back1">&nbsp;</a><a
href="#note1" aria-describedby="footnote-label"></a>.</p>

<p>Now that we can use random numbers, we can write a simple "Rock, Paper, Scissors"
game.  In this game, two players each pick one of the three possible throws from
the name of the game.  There are then rules for determining the winner based on the
two throws where:</p>

<ul>
<li>Rock beats scissors</li>
<li>Scissors beats paper</li>
<li>Paper beats rock</li>
</ul>

<p>In order to write this program, we will do three main things:</p>

<ol>
<li>Get the user's throw by asking them in an input statement</li>
<li>Get the computer's throw by choosing a random number</li>
<li>Compare the two and determine a winner</li>
</ol>

<p>The code for this program is below:</p>

<pre>
<code class="python">
import random

# get the user's throw
user = input("Rock, Paper, or Scissors? ")

# pick the computer's throw randomly
num = random.randint(1, 3)
if num == 1:
    comp = "Rock"
elif num == 2:
    comp = "Paper"
else:
    comp = "Scissors"
print("Computer throws", comp)

# if they threw the same thing, it's a tie
if user == comp:
    print("Tie!")

# if the user throws something that beats the computer
elif user == "Rock" and comp == "Scissors" or \
     user == "Scissors" and comp == "Paper" or \
     user == "Paper" and comp == "Rock":
   print("You win!")
else:
    print("You lose!")
</code>
</pre>

<p>This program does something we have not seen yet, which is to break
a line of code into pieces.  The condition which tests to see if the user
wins is very long.  We could write it all on one line, but here we split
it into three lines.  Because Python cares about indentation, we have to
tell it that those three lines are actually still part of one long condition.
We do that by putting the <code>\</code> symbol at the end of the line.  That tells Python
that the line continues below.</p>

<p>This program would not work (or at least not be very fun) without random
numbers.  We pick the random number to be between 1 and 3.  We then use the
random number to decide which of the three things the computer should play.
Here is an example run where we were lucky enough to win:</p>

<pre class="output">
Rock, Paper, or Scissors? <span class="input">Paper</span>
Computer throws Rock
You win!
</pre>

<h2>8.7 Third-Party Libraries</h2>
<hr />

<p>The math and random libraries both come with Python.  If you have Python
installed, you can import them and start using them right away.  In this
section we'll talk about how to use libraries that Python <em>doesn't</em> come
with.  These are sometimes called "third-party" libraries since some other
person besides you and the language designers created them.</p>

<p>Python programmers who want to share a library they created with the world
do so on the <a href="https://pypi.org/">Python Package Index (PyPI)</a>.  This
is a common repository for sharing code in a placer everyone can find it.  Most
of the widely used libraries on PyPI are very complex, with many of them having
entire textbooks devoted just to them.</p>

<p>As an example of one simple third-party library, we will talk about the
"art" library, which you can read about on the <a
href="https://pypi.org/project/art/">PyPI art page</a>.  This library solves
the very important problem of printing messages in fancier "ASCII art" fonts.
To be able to use it, we first must install it.  Luckily, Thonny makes this
very easy.</p>

<p>Start by clicking "Tools" on the toolbar, and then "Manage Packages...".
That pulls up a window that looks something like this:</p>

<figure>
<img src="images/pkgs1.png"
alt="The screen shows a list of packages installed, along with
a search bar where one can search for new packages to install." />
<figcaption>The Manage Packages Screen</figcaption>
</figure>


<p>Now we can search PyPI for the art package.  There are several results, so
click on the one that just says "art":</p>

<figure>
<img src="images/pkgs2.png"
alt="This screen shows the result of searching for the 'art' package.
There are several results with the one just called 'art' being the
one we want." />
<figcaption>The Search Results for "art"</figcaption>
</figure>

<p>That brings you to this page.  Click "Install" to install the package:</p>

<figure>
<img src="images/pkgs3.png"
alt="This screen shows details on the art package, including a short description,
the version and the home page.  There is also a button to install the package." />
<figcaption>The art Package Screen</figcaption>
</figure>

<p>We should now have the library and be ready to use it.  It comes with
several functions you can read about on its home page.  For now let's just call
the <code>art.tprint</code> function which takes a string and prints it out
in a fancy ASCII art font:</p>

<pre>
<code class="python">
import art

# print the message in a fancy way
art.tprint("Hello!")
</code>
</pre>

<p>That gives us this exciting output:</p>

<pre class="output">
 _   _        _  _         _
| | | |  ___ | || |  ___  | |
| |_| | / _ \| || | / _ \ | |
|  _  ||  __/| || || (_) ||_|
|_| |_| \___||_||_| \___/ (_)
</pre>





<h2>8.8 Using Libraries</h2>
<hr />

<p>The functions and things that can be used in Python come in three
broad categories:</p>

<ol>

<li>Python has some "built-in" things that can be used without having to import
anything.  Those can be seen <a
href="https://docs.python.org/3/library/functions.html">on this page</a>, and
include <code>print</code>, <code>len</code>, <code>round</code> and so on.</li>

<li>Python also comes with lots of libraries pre-installed, but which you need
to import to be able to call upon.  These include the math and random libraries
that we have seen in this chapter.  You can find a list of these <a
href="https://docs.python.org/3/library/">on this page</a>.  We will see a few
more examples as we go on.</li>

<li>Lastly, anyone can create their own Python libraries.  There are thousands
of Python libraries that programmers have created and shared with others on the
Internet.  Thonny allows you to download them from the Python Package Index.
Once downloaded, you can import them and use them in your programs.</li>

</ol>

<p>One of the cool things about coding is that you can build upon the work of
others.  It would be overwhelming (if not downright impossible) to build a big
program from scratch and have to write everything in it yourself.  Instead,
you can use things that come with Python or written by others as a part
of your program.</p>


<div class="blackbox">
<div class="blackbox-title">
<strong>Chapter Summary</strong>
</div>
<div class="blackbox-contents">
<ul>
    <li>Python comes with some functions available by default, such as <code>print</code>,
        <code>range</code>, and <code>len</code>.  Other things are included with Python,
        but we have to import libraries to access them.</li>
    <li>The import statement allows us to tell Python we want to use a library.  The
        basic and most common form of it imports the library, but we must specify the
        name of the library and a . before each thing we use from it.</li>
    <li>There is another form of import we can use which starts with the keyword "from".
        This form allows us to import things from a library without needing to put the
        name of the library and the . before each thing.</li>
    <li>Each library has a page of documentation which shows you all of the things in
        the library and teaches you how to use them.</li>
    <li>Programmers use libraries to make programming easier and can even share their
        own code as libraries for others to build off.</li>
</ul>
</div>
</div>


<footer>
<h2 class="visually-hidden" id="footnote-label">Footnotes</h2>
<ol>

<li id="note1">There have been cases where programmers use this fact to figure out the
algorithms behind "random" gambling games like slot machines and predict when the games
will produce a payout.<a href="#back1" aria-label="Back to content">↩</a></li>

</ol>
</footer>

